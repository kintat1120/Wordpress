{% extends "base.twig" %}

{% block content %}
<script>
//Show first question
$(function() {
    var html = "";
    $.getJSON('http://127.0.0.1/wordpress/wp-content/uploads/2021/06/form.json', function(data) {
        $.each(data.form.sectionA, function(index, firstSection) {
            $.each(firstSection, function(Qnumber, items) {
                html+="<div class='row justify-content-center mt-5'>";
                html+="<div class='col-8 bg-white shadow p-4 white-bg-content' style='border-radius:30px;'>";
                html+="<p><strong class='fs-5'>"+Qnumber+") "+items.question+"</strong></p>";
                //console.log(Qnumber)
                //console.log(items.question)
                $.each(items.answer, function(answerIndex, answers) {
                    html+="<div class='form-check'>";
                    html+="<input class='form-check-input radio-style' type='radio' name='radio' id='"+Qnumber+"' value='"+answers.next+"'>";
                    html+="<label class='form-check-label' for='flexRadioDefault1'>";
                    html+="<strong class='fs-5'>"+answers.txt+"</strong>";
                    html+="</label>";
                    html+="</div>";
                    //console.log(answers.txt)
                });
                html+="</div></div>";
            });
        });
        //console.log(html)
        $( "#question" ).append(html);
    });
});

$(function(){
    $('#carouselExampleControls').delegate("#next","click", function(){
        
        console.log("gewgewgw")
        //var questionID = $(this).attr('id');
        /*
        var next = $('input[name=radio]:checked', '#question').val();
        $.getJSON('http://127.0.0.1/wordpress/wp-content/uploads/2021/06/form.json', function(data) {
            $.each(data.form, function(index, item) {
                $.each(item, function(ind, val) {
                    //console.log(ind);
                    if(ind == next){
                        $( "#question" ).append(
                            `
                            <p><strong class='fs-5'>`+ind+`) `+val.question+`</strong></p>
                            <div class='radio-margin'>
                            `
                        );
                        $.each(val.answer, function(i, v) {
                            $( "#question" ).append(
                                `
                                <div class='form-check'>
                                    <input class='form-check-input radio-style' type='radio' name='radio' id='`+i+`' value='`+v.next+`'>
                                    <label class='form-check-label' for='flexRadioDefault1'>
                                    <strong class='fs-5'>`+v.txt+`</strong>
                                    </label>
                                </div>
                                `
                            );
                        });
                        //console.log(val.question);
                        //console.log(val.answer);
                    }
                });
            });
            $( "#question" ).append(
                `</div>`
            );
        });*/
    });
});
/*$(function() {
    $.getJSON('http://127.0.0.1/wordpress/wp-content/uploads/2021/06/form.json', function(data) {
        $.each(data.form, function(index, item) {
            $.each(item, function(ind, val) {
                //console.log(ind)
                //console.log(val.question);
                $.each(val.answer, function(i, v) {
                    console.log(v.txt);
                    if(v.checkbox){
                        $.each(v.checkbox, function(a, checkboxVal) {
                            if(checkboxVal.txt){
                                $.each(checkboxVal, function(b, c) {
                                    console.log(c);
                                });
                            } else {
                                console.log(checkboxVal);
                            }
                        });
                    }
                    if(v.input){

                    }
                });
            });
        });
    });
});*/
</script>
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-10">
            <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <div class="container" id="question">
                            <div class="row justify-content-center">
                                <div class="col-8 bg-white shadow p-4" style="border-radius:30px;">
                                    <strong class="fs-2 white-bg-title">離婚事宜</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next" id="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
